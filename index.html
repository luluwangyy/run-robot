<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Lulu Remote Servo Control</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align:center; margin-top:80px; }
    button { font-size: 1.4rem; margin: 10px; padding: 10px 30px; }
  </style>
</head>
<body>
  <h2>ğŸ¤– Remote Servo Control</h2>
  <p>Status: <span id="status">Connecting...</span></p>

  <button onclick="sendAngle(60)">Move to 60Â°</button>
  <button onclick="sendAngle(120)">Move to 120Â°</button>

  <script>
    const broker = "wss://0640aec6af724530bf88d7d8f3a6b10d.s1.eu.hivemq.cloud:8884/mqtt";
    const options = {
      username: "lulu-pi",
      password: "Wang20198112@"
    };
    const topic = "lulu/hand/cmd";
    const client = mqtt.connect(broker, options);

    client.on("connect", () => {
      document.getElementById("status").innerText = "âœ… Connected";
      console.log("Connected to HiveMQ Cloud");
    });

    client.on("error", (err) => {
      document.getElementById("status").innerText = "âŒ Error";
      console.error("MQTT error:", err);
    });

    function sendAngle(angle) {
      const msg = JSON.stringify({ angle });
      client.publish(topic, msg);
      console.log("Sent:", msg);
      document.getElementById("status").innerText = `ğŸ“¤ Sent angle ${angle}Â°`;
    }
  </script>
</body>
</html>
